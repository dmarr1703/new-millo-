<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Millo</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <i class="fas fa-heart"></i> Millo
            </a>
        </div>
    </nav>

    <div class="container">
        <div class="section-title">
            <h1>Checkout</h1>
            <p>Complete your purchase securely</p>
        </div>

        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> <strong>Demo Mode:</strong> This is a demonstration. No real payment will be processed.
        </div>

        <form onsubmit="processCheckout(event)" style="display: grid; grid-template-columns: 1fr 400px; gap: 2rem; align-items: start;">
            <!-- Checkout Form -->
            <div>
                <!-- Contact Information -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-user"></i> Contact Information</h2>
                    </div>
                    <div class="form-group">
                        <label>Full Name *</label>
                        <input type="text" id="fullName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address *</label>
                        <input type="email" id="email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="phone" class="form-control" placeholder="+1 (555) 123-4567">
                    </div>
                </div>

                <!-- Shipping Address -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-truck"></i> Shipping Address</h2>
                    </div>
                    <div class="form-group">
                        <label>Street Address *</label>
                        <input type="text" id="address" class="form-control" required>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label>City *</label>
                            <input type="text" id="city" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Province *</label>
                            <select id="province" class="form-control" required>
                                <option value="">Select Province</option>
                                <option value="AB">Alberta</option>
                                <option value="BC">British Columbia</option>
                                <option value="MB">Manitoba</option>
                                <option value="NB">New Brunswick</option>
                                <option value="NL">Newfoundland and Labrador</option>
                                <option value="NS">Nova Scotia</option>
                                <option value="ON">Ontario</option>
                                <option value="PE">Prince Edward Island</option>
                                <option value="QC">Quebec</option>
                                <option value="SK">Saskatchewan</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Postal Code *</label>
                        <input type="text" id="postalCode" class="form-control" placeholder="A1A 1A1" required>
                    </div>
                </div>

                <!-- Payment Information -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-credit-card"></i> Payment Information</h2>
                    </div>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i> Demo mode: Enter any test card details (e.g., 4242 4242 4242 4242)
                    </div>
                    <div class="form-group">
                        <label>Card Number *</label>
                        <input type="text" id="cardNumber" class="form-control" placeholder="1234 5678 9012 3456" required>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label>Expiry Month *</label>
                            <input type="text" id="expMonth" class="form-control" placeholder="MM" maxlength="2" required>
                        </div>
                        <div class="form-group">
                            <label>Expiry Year *</label>
                            <input type="text" id="expYear" class="form-control" placeholder="YY" maxlength="2" required>
                        </div>
                        <div class="form-group">
                            <label>CVV *</label>
                            <input type="text" id="cvv" class="form-control" placeholder="123" maxlength="3" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Cardholder Name *</label>
                        <input type="text" id="cardName" class="form-control" required>
                    </div>
                </div>
            </div>

            <!-- Order Summary -->
            <div class="card" style="position: sticky; top: 100px;">
                <div class="card-header">
                    <h2 class="card-title">Order Summary</h2>
                </div>
                
                <div id="orderItems" style="margin-bottom: 1.5rem; max-height: 300px; overflow-y: auto;">
                    <!-- Order items will be loaded here -->
                </div>

                <div style="margin-bottom: 1.5rem; border-top: 1px solid var(--border); padding-top: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.75rem;">
                        <span>Subtotal:</span>
                        <span id="checkoutSubtotal">$0.00 CAD</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.75rem; color: var(--gray);">
                        <span>Tax (13%):</span>
                        <span id="checkoutTax">$0.00 CAD</span>
                    </div>
                    <div style="border-top: 2px solid var(--border); padding-top: 0.75rem; margin-top: 0.75rem;">
                        <div style="display: flex; justify-content: space-between; font-size: 1.25rem; font-weight: 700;">
                            <span>Total:</span>
                            <span id="checkoutTotal" style="color: var(--primary-color);">$0.00 CAD</span>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn-secondary" style="width: 100%;">
                    <i class="fas fa-lock"></i> Place Order
                </button>

                <div style="margin-top: 1rem; padding: 1rem; background: var(--light-gray); border-radius: 8px; font-size: 0.875rem; color: var(--gray); text-align: center;">
                    <i class="fas fa-shield-alt"></i> Your payment is secure and encrypted
                </div>
            </div>
        </form>
    </div>

    <script src="js/demo-data.js"></script>
    <script src="js/app.js"></script>
    <script src="js/cart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadCheckoutSummary();
        });

        function loadCheckoutSummary() {
            const cart = JSON.parse(localStorage.getItem('millo_cart')) || [];
            
            if (cart.length === 0) {
                window.location.href = 'cart.html';
                return;
            }

            // Display order items
            const orderItems = document.getElementById('orderItems');
            orderItems.innerHTML = cart.map(item => `
                <div style="display: flex; gap: 1rem; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border);">
                    <img src="${item.image}" alt="${item.productName}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem;">${item.productName}</div>
                        <div style="color: var(--gray); font-size: 0.875rem;">Qty: ${item.quantity}</div>
                    </div>
                    <div style="font-weight: 700; color: var(--primary-color);">
                        $${(item.price * item.quantity).toFixed(2)}
                    </div>
                </div>
            `).join('');

            // Calculate totals
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * 0.13;
            const total = subtotal + tax;

            document.getElementById('checkoutSubtotal').textContent = formatCurrency(subtotal);
            document.getElementById('checkoutTax').textContent = formatCurrency(tax);
            document.getElementById('checkoutTotal').textContent = formatCurrency(total);
        }
    </script>

    <style>
        @media (max-width: 968px) {
            form {
                grid-template-columns: 1fr !important;
            }
            .card {
                position: static !important;
            }
        }
    </style>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"9a4236838df739fd","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.9.1","token":"4edd5f8ec12a48cfa682ab8261b80a79"}' crossorigin="anonymous"></script>
</body>
</html>
